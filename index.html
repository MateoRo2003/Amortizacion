<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Panel Financiero - PrÃ©stamos</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/4.4.0/chart.umd.min.js"></script>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="header">
        <div style="display: flex; align-items: center; gap: 15px;">
            <div class="logo">ğŸ’°</div>
            <h1>Panel Financiero</h1>
        </div>
        <div style="color: #666; font-size: 14px;">PerÃ­odo 2025</div>
    </div>

    <div class="filters">
        <h3 style="margin-bottom: 15px; color: #333;">ğŸ” ConfiguraciÃ³n del PrÃ©stamo</h3>
        <div class="filter-group">
            <div class="input-wrapper">
                <label>Monto:</label>
                <input type="number" id="monto" placeholder="Ej: 150000" value="150000">
            </div>
            
            <div class="input-wrapper">
                <label>Cuotas:</label>
                <input type="number" id="cuotas" placeholder="Ej: 12" value="12">
            </div>
            
            <div class="input-wrapper">
                <label>Banco Principal:</label>
                <select id="banco">
                    <option value="Santander">Santander</option>
                    <option value="BNA">Banco NaciÃ³n</option>
                    <option value="Macro">Macro</option>
                    <option value="BCRA">BCRA</option>
                    <option value="NaranjaX">Naranja X</option>
                    <option value="BBVA">BBVA</option>
                    <option value="Galicia">Galicia</option>
                    <option value="MercadoPago">Mercado Pago</option>
                </select>
            </div>
            
            <button class="btn-calcular" onclick="calcularYActualizar()">Calcular</button>
        </div>
        
        <div class="comparacion-section">
            <h4 style="margin: 20px 0 10px 0; color: #333;">ğŸ“Š Comparar con otro banco</h4>
            <div class="filter-group">
                <div class="input-wrapper">
                    <label>Banco ComparaciÃ³n:</label>
                    <select id="bancoComparacion">
                        <option value="">Seleccionar banco...</option>
                        <option value="Santander">Santander</option>
                        <option value="BNA">Banco NaciÃ³n</option>
                        <option value="Macro">Macro</option>
                        <option value="BCRA">BCRA</option>
                        <option value="NaranjaX">Naranja X</option>
                        <option value="BBVA">BBVA</option>
                        <option value="Galicia">Galicia</option>
                        <option value="MercadoPago">Mercado Pago</option>
                    </select>
                </div>
                <button class="btn-comparar" onclick="compararBancos()">Comparar</button>
                <button class="btn-limpiar" onclick="limpiarComparacion()">Limpiar</button>
            </div>
        </div>
    </div>

    <div class="loading" id="loading">â³ Calculando...</div>

    <div class="kpi-container">
        <div class="kpi-card pink">
            <div class="kpi-label">Monto Total a Pagar</div>
            <div class="kpi-value" id="totalPagar">$0</div>
            <div class="kpi-subtitle" id="totalPagarComp"></div>
            <div class="kpi-icon">ğŸ’µ</div>
        </div>
        <div class="kpi-card purple">
            <div class="kpi-label">InterÃ©s Total</div>
            <div class="kpi-value" id="interesTotal">$0</div>
            <div class="kpi-subtitle" id="interesTotalComp"></div>
            <div class="kpi-icon">ğŸ“Š</div>
        </div>
        <div class="kpi-card orange">
            <div class="kpi-label">Cuota Mensual</div>
            <div class="kpi-value" id="cuotaMensual">$0</div>
            <div class="kpi-subtitle" id="cuotaMensualComp"></div>
            <div class="kpi-icon">ğŸ“…</div>
        </div>
        <div class="kpi-card blue">
            <div class="kpi-label">TNA Aplicada</div>
            <div class="kpi-value" id="tnaAplicada">0%</div>
            <div class="kpi-subtitle" id="tnaAplicadaComp"></div>
            <div class="kpi-icon">%</div>
        </div>
    </div>

    <!-- MÃ©tricas Financieras Adicionales -->
    <div class="metricas-adicionales">
        <h3 style="margin-bottom: 15px; color: white; text-align: center;">ğŸ“ˆ MÃ©tricas Financieras Detalladas</h3>
        <div class="metricas-grid">
            <div class="metrica-item">
                <div class="metrica-label">TEM (Tasa Efectiva Mensual)</div>
                <div class="metrica-value" id="tem">0%</div>
                <div class="metrica-comp" id="temComp"></div>
            </div>
            <div class="metrica-item">
                <div class="metrica-label">CFT (Costo Financiero Total)</div>
                <div class="metrica-value" id="cft">$0</div>
                <div class="metrica-comp" id="cftComp"></div>
            </div>
            <div class="metrica-item">
                <div class="metrica-label">CFTNA (CFT Nominal Anual)</div>
                <div class="metrica-value" id="cftna">0%</div>
                <div class="metrica-comp" id="cftnaComp"></div>
            </div>
            <div class="metrica-item">
                <div class="metrica-label">TEA (Tasa Efectiva Anual)</div>
                <div class="metrica-value" id="tea">0%</div>
                <div class="metrica-comp" id="teaComp"></div>
            </div>
                        <div class="metrica-item">
                <div class="metrica-label">CFTEA (CFT Efectivo Anual)</div>
                <div class="metrica-value" id="cftea">0%</div>
                <div class="metrica-comp" id="cfteaComp"></div>
            </div>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-card">
            <h3><div class="chart-icon">ğŸ“ˆ</div>EvoluciÃ³n del Saldo</h3>
            <canvas id="chartSaldo"></canvas>
        </div>
        <div class="chart-card">
            <h3><div class="chart-icon">ğŸ¯</div>ComposiciÃ³n de Cuotas</h3>
            <canvas id="chartComposicion"></canvas>
        </div>
    </div>

    <div class="chart-container">
        <div class="chart-card">
            <h3><div class="chart-icon">ğŸ’¹</div>DistribuciÃ³n InterÃ©s vs Capital</h3>
            <canvas id="chartDistribucion"></canvas>
        </div>
        <div class="chart-card">
            <h3><div class="chart-icon">ğŸ“Š</div>Cuotas Mensuales</h3>
            <canvas id="chartCuotas"></canvas>
        </div>
    </div>

    <!-- SecciÃ³n de ComparaciÃ³n -->
    <div id="comparacionSection" style="display: none;">
        <div class="comparacion-banner">
            <h3>âš–ï¸ ComparaciÃ³n entre Bancos</h3>
            <p style="margin-top: 10px; opacity: 0.9;">AnÃ¡lisis detallado de las diferencias entre ambos prÃ©stamos</p>
        </div>
        
        <div class="chart-container">
            <div class="chart-card">
                <h3><div class="chart-icon">ğŸ’°</div>ComparaciÃ³n de Costos Totales</h3>
                <canvas id="chartComparacionTotal"></canvas>
            </div>
            <div class="chart-card">
                <h3><div class="chart-icon">ğŸ“Š</div>ComparaciÃ³n de Cuotas Mensuales</h3>
                <canvas id="chartComparacionCuotas"></canvas>
            </div>
        </div>

        <div class="chart-container">
            <div class="chart-card">
                <h3><div class="chart-icon">ğŸ“ˆ</div>EvoluciÃ³n Comparada de Saldos</h3>
                <canvas id="chartComparacionSaldos"></canvas>
            </div>
            <div class="chart-card">
                <h3><div class="chart-icon">ğŸ¯</div>ComparaciÃ³n de Intereses</h3>
                <canvas id="chartComparacionIntereses"></canvas>
            </div>
        </div>

        <div class="tabla-comparacion">
            <h3 style="margin-bottom: 20px; color: #333;">ğŸ“Š Resumen Comparativo Detallado</h3>
            <div id="tablaResumenComparativo"></div>
        </div>
    </div>

    <div class="table-container">
        <h3 style="margin-bottom: 20px; color: #333;">ğŸ“‹ Tabla de AmortizaciÃ³n Detallada</h3>
        <div id="tablaAmortizacion"></div>
    </div>

    <script src="script.js"></script>
</body>
</html>